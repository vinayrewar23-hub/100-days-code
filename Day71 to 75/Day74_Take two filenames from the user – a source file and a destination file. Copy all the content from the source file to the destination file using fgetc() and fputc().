#include <stdio.h>
#include <stdlib.h>

int main() {
    char src_name[260];
    char dest_name[260];
    FILE *src_fp = NULL;
    FILE *dest_fp = NULL;
    int ch;

    /* Get filenames from user */
    printf("Enter source filename: ");
    if (scanf("%259s", src_name) != 1) {
        fprintf(stderr, "Failed to read source filename.\n");
        return 1;
    }

    printf("Enter destination filename: ");
    if (scanf("%259s", dest_name) != 1) {
        fprintf(stderr, "Failed to read destination filename.\n");
        return 1;
    }

    /* Open files */
    src_fp = fopen(src_name, "rb");   /* open in binary mode to copy any file */
    if (src_fp == NULL) {
        perror("Error opening source file");
        return 1;
    }

    dest_fp = fopen(dest_name, "wb"); /* write (create/overwrite) */
    if (dest_fp == NULL) {
        perror("Error opening destination file");
        fclose(src_fp);
        return 1;
    }

    /* Copy using fgetc and fputc */
    while ((ch = fgetc(src_fp)) != EOF) {
        if (fputc(ch, dest_fp) == EOF) {
            perror("Error writing to destination file");
            fclose(src_fp);
            fclose(dest_fp);
            return 1;
        }
    }

    printf("File copied successfully from '%s' to '%s'.\n", src_name, dest_name);

    /* Clean up */
    fclose(src_fp);
    fclose(dest_fp);

    return 0;
}
